Menu="Scheduler:2a"
Title="Mover Tuning"
Tag="gear"
---
<?
if (empty($disks['cache']) || $disks['cache']['status']=='DISK_NP') {
  echo "<p class='notice'>No Cache disk present!</p>";
} elseif ($var['shareCacheEnabled']!='yes') {
  echo "<p class='notice'>Cache disk not enabled!</p>";
} elseif ($var['shareUser']=='-') {
  echo "<p class='notice'>User shares not enabled!</p>";
}
$plugin='ca.mover.tuning';
$cfg = parse_plugin_cfg($plugin);

?>
<form markdown="1" method="POST" action="/update.php" target="progressFrame">
<input type="hidden" name="#file" value="<?=$plugin?>/<?=$plugin?>.cfg">
Disable Mover running on a schedule:
: <select name='moverDisabled' size='1' class='narrow'>
<?=mk_option($cfg['moverDisabled'],"no","No")?>
<?=mk_option($cfg['moverDisabled'],"yes","Yes")?>
</select>

> This will prevent mover from running at the schedule set in Mover Settings.  You will only be able to run mover by manually invoking it.

Only move at this threshold of used cache space:
: <select name="threshold" size="1" class='narrow'>
<?for ($t=0;$t<100;$t+=5):?>
<?=mk_option($cfg['threshold'], $t, "$t %")?>
<?endfor;?>
</select>

> Set to the amount of disk space used on the cache drive for mover to run.

Let mover run during a parity check / rebuild:
: <select name='parity' size='1' class='narrow'>
  <?=mk_option($cfg['parity'],'yes','Yes')?>
	<?=mk_option($cfg['parity'],'no','No')?>
</select>

> If a parity check or disk rebuild is in progress, this will prevent mover from running

Clicking "Move Now" follows the above rules?
: <select name='moveFollows' size='1' class='narrow'>
	<?=mk_option($cfg['moveFollows'],'no','Always Moves')?>
  <?=mk_option($cfg['moveFollows'],'follows','Follows Rules')?>
</select>

> Selects if the cache free space, and parity check/rebuild settings also apply when manually pressing Move Now

Log when not moving due to rules:
: <select name='logging' size='1' class='narrow'>
<?=mk_option($cfg['logging'],"no",'No')?>
<?=mk_option($cfg['logging'],"yes","Yes")?>
</select>

> Enables or disables logging from this plugin

&nbsp;
: <input type="submit" name="#apply" value="Apply" id='Apply'><input type="button" id="DONE" value="Done" onclick="done()">
</form>
<a style='float:right' href='https://www.paypal.com/cgi-bin/webscr?cmd=_s-xclick&hosted_button_id=7M7CBCVU732XG' target='_blank'><img src="https://www.paypalobjects.com/en_US/i/btn/btn_donateCC_LG.gif"></a></center>
